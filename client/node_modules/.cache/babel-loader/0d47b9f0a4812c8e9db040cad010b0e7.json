{"ast":null,"code":"var _jsxFileName = \"/Users/yong/development/projects/rtv-mern-app/client/src/components/IssueCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport CommentForm from \"./CommentForm.js\";\nimport { UserContext } from \"../context/UserProvider.js\";\nimport { userAxios } from \"../context/UserProvider\";\nimport IssueForm from \"./IssueForm.js\";\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst style = {\n  card: `flex flex-col  border border-black p-2 m-2 rounded-lg w-[75%]`,\n  img: `max-h-[screen] max-w-[500px] my-3`,\n  h1: `text-2xl m-4`,\n  p: `my-[10px] m-4`,\n  delete: `my-[10px] p-[10px] w-9/12`,\n  edit: `my-[10px] p-[10px] w-9/12`\n};\n\nconst IssueCard = props => {\n  _s();\n\n  const {\n    title,\n    description,\n    _id,\n    comment,\n    imgUrl,\n    upvotes,\n    downvotes\n  } = props;\n  const [upvotesCount, setUpvotesCount] = useState(upvotes.length);\n  const [downvotesCount, setDownvotesCount] = useState(downvotes.length);\n  const [editToggle, setEditToggle] = useState(false);\n  const [isVoted, setIsVoted] = useState(false);\n  const {\n    deleteIssue,\n    getUserIssues,\n    editIssue,\n    user: {\n      username\n    }\n  } = useContext(UserContext);\n  useEffect(() => {\n    getUserIssues();\n  }, [downvotesCount, upvotesCount]);\n\n  const handleUpvote = () => {\n    userAxios.put(`/api/issue/upvote/${_id}`).then(res => {\n      console.log(`this is res.data.upvotes ${res.data.upvotes}`);\n      setUpvotesCount(res.data.upvotes.length);\n      setDownvotesCount(res.data.downvotes.length);\n    }).catch(err => console.log(err));\n  };\n\n  const handleDownvote = () => {\n    userAxios.put(`/api/issue/downvote/${_id}`).then(res => {\n      console.log(res.data.downvotes);\n      setDownvotesCount(res.data.downvotes.length);\n      setUpvotesCount(res.data.upvotes.length);\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.card,\n    children: !editToggle ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: style.h1,\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: style.p,\n        children: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imgUrl,\n        className: style.img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: style.delete,\n        onClick: () => deleteIssue(_id),\n        children: \"delete issue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: style.edit,\n        onClick: () => setEditToggle(prevToggle => !prevToggle),\n        children: \"edit issue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(FiThumbsUp, {\n          onClick: handleUpvote,\n          className: upvotesCount > 0 ? \"text-blue-600 text-[25px] hover:bg-yellow-400\" : \"text-[25px] hover:bg-yellow-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), upvotesCount, /*#__PURE__*/_jsxDEV(FiThumbsDown, {\n          onClick: handleDownvote,\n          className: downvotesCount > 0 ? \"text-blue-600 text-[25px] hover:bg-red-300\" : \"text-[25px] hover:bg-red-300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), downvotesCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CommentForm, {\n        _id: _id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Post by: \", username, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(IssueForm, {\n        title: title,\n        description: description,\n        imgUrl: imgUrl,\n        btnText: \"Submit Edit\",\n        _id: _id,\n        submit: editIssue,\n        handleClose: setEditToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setEditToggle(prevToggle => !prevToggle),\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\n_s(IssueCard, \"r/1lazZGtcys12oaRgn308oDMdA=\");\n\n_c = IssueCard;\nexport default IssueCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"IssueCard\");","map":{"version":3,"names":["React","useContext","useState","useEffect","CommentForm","UserContext","userAxios","IssueForm","FiThumbsUp","FiThumbsDown","style","card","img","h1","p","delete","edit","IssueCard","props","title","description","_id","comment","imgUrl","upvotes","downvotes","upvotesCount","setUpvotesCount","length","downvotesCount","setDownvotesCount","editToggle","setEditToggle","isVoted","setIsVoted","deleteIssue","getUserIssues","editIssue","user","username","handleUpvote","put","then","res","console","log","data","catch","err","handleDownvote","prevToggle"],"sources":["/Users/yong/development/projects/rtv-mern-app/client/src/components/IssueCard.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\"\nimport CommentForm from \"./CommentForm.js\"\nimport { UserContext } from \"../context/UserProvider.js\"\nimport { userAxios } from \"../context/UserProvider\"\nimport IssueForm from \"./IssueForm.js\"\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\"\n\nconst style = {\n  card: `flex flex-col  border border-black p-2 m-2 rounded-lg w-[75%]`,\n  img: `max-h-[screen] max-w-[500px] my-3`,\n  h1: `text-2xl m-4`,\n  p: `my-[10px] m-4`,\n  delete: `my-[10px] p-[10px] w-9/12`,\n  edit: `my-[10px] p-[10px] w-9/12`,\n}\n\nconst IssueCard = (props) => {\n  const { title, description, _id, comment, imgUrl, upvotes, downvotes } = props\n  const [upvotesCount, setUpvotesCount] = useState(upvotes.length)\n  const [downvotesCount, setDownvotesCount] = useState(downvotes.length)\n  const [editToggle, setEditToggle] = useState(false)\n  const [isVoted, setIsVoted] = useState(false)\n  const {\n    deleteIssue,\n    getUserIssues,\n    editIssue,\n    user: { username },\n  } = useContext(UserContext)\n\n  useEffect(() => {\n    getUserIssues()\n  }, [downvotesCount, upvotesCount])\n\n  const handleUpvote = () => {\n    userAxios\n      .put(`/api/issue/upvote/${_id}`)\n      .then((res) => {\n        console.log(`this is res.data.upvotes ${res.data.upvotes}`)\n        setUpvotesCount(res.data.upvotes.length)\n        setDownvotesCount(res.data.downvotes.length)\n      })\n      .catch((err) => console.log(err))\n  }\n  const handleDownvote = () => {\n    userAxios\n      .put(`/api/issue/downvote/${_id}`)\n      .then((res) => {\n        console.log(res.data.downvotes)\n        setDownvotesCount(res.data.downvotes.length)\n        setUpvotesCount(res.data.upvotes.length)\n      })\n      .catch((err) => console.log(err))\n  }\n\n  return (\n    <div className={style.card}>\n      {!editToggle ? (\n        <>\n          <h1 className={style.h1}>{title}</h1>\n          <p className={style.p}>{description}</p>\n          <img src={imgUrl} className={style.img}></img>\n          <button className={style.delete} onClick={() => deleteIssue(_id)}>\n            delete issue\n          </button>\n          <button\n            className={style.edit}\n            onClick={() => setEditToggle((prevToggle) => !prevToggle)}\n          >\n            edit issue\n          </button>\n          <div className='flex items-center gap-2'>\n            <FiThumbsUp\n              onClick={handleUpvote}\n              className={\n                upvotesCount > 0\n                  ? \"text-blue-600 text-[25px] hover:bg-yellow-400\"\n                  : \"text-[25px] hover:bg-yellow-400\"\n              }\n            />\n            {upvotesCount}\n\n            <FiThumbsDown\n              onClick={handleDownvote}\n              className={\n                downvotesCount > 0\n                  ? \"text-blue-600 text-[25px] hover:bg-red-300\"\n                  : \"text-[25px] hover:bg-red-300\"\n              }\n            />\n            {downvotesCount}\n          </div>\n\n          {/* <p>Total Votes: {upvotesCount + downvotesCount}</p> */}\n          <CommentForm _id={_id} />\n          <p>Post by: {username} </p>\n        </>\n      ) : (\n        <>\n          <IssueForm\n            title={title}\n            description={description}\n            imgUrl={imgUrl}\n            btnText='Submit Edit'\n            _id={_id}\n            submit={editIssue}\n            handleClose={setEditToggle}\n          />\n          <button onClick={() => setEditToggle((prevToggle) => !prevToggle)}>\n            Close\n          </button>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default IssueCard\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}