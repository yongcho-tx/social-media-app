{"ast":null,"code":"var _jsxFileName = \"/Users/yong/development/projects/rtv-mern-app/client/src/components/CommentForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport CommentList from \"./CommentList.js\";\nimport { userAxios, UserContext } from \"../context/UserProvider\";\nimport { BiComment } from \"react-icons/bi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst style = {\n  form: `flex gap-2`\n};\n\nconst CommentForm = props => {\n  _s();\n\n  const initComment = \"\";\n  const [comment, setComment] = useState(initComment);\n  const [comments, setComments] = useState([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const {\n    _id\n  } = props;\n\n  const addComment = () => {\n    userAxios.post(`/api/comment/${_id}`, {\n      comment\n    }).then(res => {\n      setComments(prevComments => {\n        return [...prevComments, res.data];\n      });\n      console.log(\"this is line 23 of comments: \", comments);\n      console.log(\"this is line 24 of comments: \", res.data);\n    }).catch(err => console.log(err.response.data.errMsg));\n  };\n\n  const handleCommentSubmit = e => {\n    e.preventDefault();\n    addComment();\n    setComment(initComment);\n  };\n\n  const handleShowComments = () => {\n    // if (comments.length < 1) {\n    userAxios.get(`/api/comment/${_id}`).then(res => {\n      console.log(res.data);\n      setComments(res.data);\n    }).catch(err => console.log(err)); // }\n\n    setIsOpen(!isOpen);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2.5 hover:bg-slate-300\",\n      children: [/*#__PURE__*/_jsxDEV(BiComment, {\n        onClick: handleShowComments,\n        className: \"my-3 text-[25px]\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [comments.length, \" comments\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCommentSubmit,\n        className: style.form,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"comment\",\n          value: comment,\n          onChange: e => setComment(e.target.value),\n          className: \"w-[80%] border border-[#343434] m-2 h-[50px]\",\n          placeholder: \"add comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"my-[5px] w-[80%] bg-[#efefef] m-2 h-[50px]\",\n          children: \"Add Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(CommentList, {\n          comments: comments\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"my-[10px] p-[5px] w-[80%]\",\n          onClick: () => setIsOpen(false),\n          children: \"Close Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(CommentForm, \"EngvOwEeGnSn4hIuHldBkdd1HdQ=\");\n\n_c = CommentForm;\nexport default CommentForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentForm\");","map":{"version":3,"names":["React","useEffect","useState","useContext","CommentList","userAxios","UserContext","BiComment","style","form","CommentForm","props","initComment","comment","setComment","comments","setComments","isOpen","setIsOpen","_id","addComment","post","then","res","prevComments","data","console","log","catch","err","response","errMsg","handleCommentSubmit","e","preventDefault","handleShowComments","get","length","target","value"],"sources":["/Users/yong/development/projects/rtv-mern-app/client/src/components/CommentForm.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\"\nimport CommentList from \"./CommentList.js\"\nimport { userAxios, UserContext } from \"../context/UserProvider\"\nimport { BiComment } from \"react-icons/bi\"\n\nconst style = {\n  form: `flex gap-2`,\n}\nconst CommentForm = (props) => {\n  const initComment = \"\"\n  const [comment, setComment] = useState(initComment)\n  const [comments, setComments] = useState([])\n  const [isOpen, setIsOpen] = useState(false)\n  const { _id } = props\n\n  const addComment = () => {\n    userAxios\n      .post(`/api/comment/${_id}`, { comment })\n      .then((res) => {\n        setComments((prevComments) => {\n          return [...prevComments, res.data]\n        })\n        console.log(\"this is line 23 of comments: \", comments)\n        console.log(\"this is line 24 of comments: \", res.data)\n      })\n      .catch((err) => console.log(err.response.data.errMsg))\n  }\n\n  const handleCommentSubmit = (e) => {\n    e.preventDefault()\n    addComment()\n    setComment(initComment)\n  }\n\n  const handleShowComments = () => {\n    // if (comments.length < 1) {\n    userAxios\n      .get(`/api/comment/${_id}`)\n      .then((res) => {\n        console.log(res.data)\n        setComments(res.data)\n      })\n      .catch((err) => console.log(err))\n    // }\n    setIsOpen(!isOpen)\n  }\n\n  return (\n    <>\n      <div className='flex items-center gap-2.5 hover:bg-slate-300'>\n        <BiComment onClick={handleShowComments} className='my-3 text-[25px]' />\n        <p>{comments.length} comments</p>\n      </div>\n      {isOpen && (\n        <>\n          <form onSubmit={handleCommentSubmit} className={style.form}>\n            <input\n              type='text'\n              name='comment'\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n              className='w-[80%] border border-[#343434] m-2 h-[50px]'\n              placeholder='add comment'\n            />\n            <button className='my-[5px] w-[80%] bg-[#efefef] m-2 h-[50px]'>\n              Add Comment\n            </button>\n          </form>\n\n          <div>\n            <CommentList comments={comments} />\n            <button\n              className='my-[10px] p-[5px] w-[80%]'\n              onClick={() => setIsOpen(false)}\n            >\n              Close Comments\n            </button>\n          </div>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default CommentForm\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,yBAAvC;AACA,SAASC,SAAT,QAA0B,gBAA1B;;;AAEA,MAAMC,KAAK,GAAG;EACZC,IAAI,EAAG;AADK,CAAd;;AAGA,MAAMC,WAAW,GAAIC,KAAD,IAAW;EAAA;;EAC7B,MAAMC,WAAW,GAAG,EAApB;EACA,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAACU,WAAD,CAAtC;EACA,MAAM,CAACG,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACe,MAAD,EAASC,SAAT,IAAsBhB,QAAQ,CAAC,KAAD,CAApC;EACA,MAAM;IAAEiB;EAAF,IAAUR,KAAhB;;EAEA,MAAMS,UAAU,GAAG,MAAM;IACvBf,SAAS,CACNgB,IADH,CACS,gBAAeF,GAAI,EAD5B,EAC+B;MAAEN;IAAF,CAD/B,EAEGS,IAFH,CAESC,GAAD,IAAS;MACbP,WAAW,CAAEQ,YAAD,IAAkB;QAC5B,OAAO,CAAC,GAAGA,YAAJ,EAAkBD,GAAG,CAACE,IAAtB,CAAP;MACD,CAFU,CAAX;MAGAC,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CZ,QAA7C;MACAW,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CJ,GAAG,CAACE,IAAjD;IACD,CARH,EASGG,KATH,CASUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACC,QAAJ,CAAaL,IAAb,CAAkBM,MAA9B,CATlB;EAUD,CAXD;;EAaA,MAAMC,mBAAmB,GAAIC,CAAD,IAAO;IACjCA,CAAC,CAACC,cAAF;IACAd,UAAU;IACVN,UAAU,CAACF,WAAD,CAAV;EACD,CAJD;;EAMA,MAAMuB,kBAAkB,GAAG,MAAM;IAC/B;IACA9B,SAAS,CACN+B,GADH,CACQ,gBAAejB,GAAI,EAD3B,EAEGG,IAFH,CAESC,GAAD,IAAS;MACbG,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACE,IAAhB;MACAT,WAAW,CAACO,GAAG,CAACE,IAAL,CAAX;IACD,CALH,EAMGG,KANH,CAMUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CANlB,EAF+B,CAS/B;;IACAX,SAAS,CAAC,CAACD,MAAF,CAAT;EACD,CAXD;;EAaA,oBACE;IAAA,wBACE;MAAK,SAAS,EAAC,8CAAf;MAAA,wBACE,QAAC,SAAD;QAAW,OAAO,EAAEkB,kBAApB;QAAwC,SAAS,EAAC;MAAlD;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAA,WAAIpB,QAAQ,CAACsB,MAAb;MAAA;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,EAKGpB,MAAM,iBACL;MAAA,wBACE;QAAM,QAAQ,EAAEe,mBAAhB;QAAqC,SAAS,EAAExB,KAAK,CAACC,IAAtD;QAAA,wBACE;UACE,IAAI,EAAC,MADP;UAEE,IAAI,EAAC,SAFP;UAGE,KAAK,EAAEI,OAHT;UAIE,QAAQ,EAAGoB,CAAD,IAAOnB,UAAU,CAACmB,CAAC,CAACK,MAAF,CAASC,KAAV,CAJ7B;UAKE,SAAS,EAAC,8CALZ;UAME,WAAW,EAAC;QANd;UAAA;UAAA;UAAA;QAAA,QADF,eASE;UAAQ,SAAS,EAAC,4CAAlB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QATF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAeE;QAAA,wBACE,QAAC,WAAD;UAAa,QAAQ,EAAExB;QAAvB;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,SAAS,EAAC,2BADZ;UAEE,OAAO,EAAE,MAAMG,SAAS,CAAC,KAAD,CAF1B;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAfF;IAAA,gBANJ;EAAA,gBADF;AAmCD,CA1ED;;GAAMR,W;;KAAAA,W;AA4EN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}