{"ast":null,"code":"import _slicedToArray from\"/Users/yong/development/projects/rtv-mern-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import CommentForm from'./CommentForm.js';import UpArrow from'../images/icons8-up-48.png';import DownArrow from'../images/icons8-down-48.png';import{UserContext}from'../context/UserProvider.js';import{userAxios}from'../context/UserProvider';import IssueForm from'./IssueForm.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var IssueCard=function IssueCard(props){var title=props.title,description=props.description,_id=props._id,comment=props.comment,imgUrl=props.imgUrl,upvotes=props.upvotes,downvotes=props.downvotes;var _useContext=useContext(UserContext),deleteIssue=_useContext.deleteIssue,getUserIssues=_useContext.getUserIssues,editIssue=_useContext.editIssue;var _useState=useState(upvotes.length),_useState2=_slicedToArray(_useState,2),upvotesCount=_useState2[0],setUpvotesCount=_useState2[1];var _useState3=useState(downvotes.length),_useState4=_slicedToArray(_useState3,2),downvotesCount=_useState4[0],setDownvotesCount=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editToggle=_useState6[0],setEditToggle=_useState6[1];useEffect(function(){getUserIssues();},[downvotesCount,upvotesCount]);var handleUpvote=function handleUpvote(){userAxios.put(\"/api/issue/upvote/\".concat(_id)).then(function(res){console.log(\"this is res.data.upvotes \".concat(res.data.upvotes));setUpvotesCount(res.data.upvotes.length);setDownvotesCount(res.data.downvotes.length);}).catch(function(err){return console.log(err);});};var handleDownvote=function handleDownvote(){userAxios.put(\"/api/issue/downvote/\".concat(_id)).then(function(res){console.log(res.data.downvotes);setDownvotesCount(res.data.downvotes.length);setUpvotesCount(res.data.upvotes.length);}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"issue\",style:cardStyle,children:!editToggle?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:\"25px\"},children:title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"10px 0\"},children:description}),/*#__PURE__*/_jsx(\"img\",{src:imgUrl,style:imgStyle}),/*#__PURE__*/_jsx(\"button\",{style:btnDelStyle,onClick:function onClick(){return deleteIssue(_id);},children:\"delete issue\"}),/*#__PURE__*/_jsx(\"button\",{style:btnEditStyle,onClick:function onClick(){return setEditToggle(function(prevToggle){return!prevToggle;});},children:\"edit issue\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Upvote: \",upvotesCount]}),/*#__PURE__*/_jsx(\"img\",{src:UpArrow,style:{width:\"36px\",height:\"36px\"},onClick:handleUpvote}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Votes: \",upvotesCount+downvotesCount]}),/*#__PURE__*/_jsx(\"img\",{src:DownArrow,style:{width:\"36px\",height:\"36px\"},onClick:handleDownvote}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Downvote: \",downvotesCount,\" \"]}),/*#__PURE__*/_jsx(\"h4\",{children:comment}),/*#__PURE__*/_jsx(CommentForm,{_id:_id})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IssueForm,{title:title,description:description,imgUrl:imgUrl,btnText:\"Submit Edit\",_id:_id,submit:editIssue,handleClose:setEditToggle}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setEditToggle(function(prevToggle){return!prevToggle;});},children:\"Close\"})]})});};export default IssueCard;var cardStyle={border:\"1px solid black\",padding:\"2em\",margin:\"2em\",borderRadius:\"10px\",width:\"300px\"};var imgStyle={maxHeight:\"500px\",maxWidth:\"500px\",margin:\"12px 0\"};var btnDelStyle={margin:\"10px 0\",padding:\"10px\",width:\"80%\"};var btnEditStyle={margin:\"10px 0\",padding:\"10px\",width:\"80%\"};","map":{"version":3,"names":["React","useContext","useState","useEffect","CommentForm","UpArrow","DownArrow","UserContext","userAxios","IssueForm","IssueCard","props","title","description","_id","comment","imgUrl","upvotes","downvotes","deleteIssue","getUserIssues","editIssue","length","upvotesCount","setUpvotesCount","downvotesCount","setDownvotesCount","editToggle","setEditToggle","handleUpvote","put","then","res","console","log","data","catch","err","handleDownvote","cardStyle","fontSize","margin","imgStyle","btnDelStyle","btnEditStyle","prevToggle","width","height","border","padding","borderRadius","maxHeight","maxWidth"],"sources":["/Users/yong/development/projects/rtv-mern-app/client/src/components/IssueCard.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport CommentForm from './CommentForm.js'\nimport UpArrow from '../images/icons8-up-48.png'\nimport DownArrow from '../images/icons8-down-48.png'\nimport { UserContext } from '../context/UserProvider.js'\nimport {userAxios} from '../context/UserProvider'\nimport IssueForm from './IssueForm.js'\n\n\nconst IssueCard = (props) => {\n\n    const { title, description, _id, comment, imgUrl, upvotes, downvotes } = props\n    const { deleteIssue, getUserIssues, editIssue } = useContext(UserContext)\n    const [upvotesCount, setUpvotesCount] = useState(upvotes.length)\n    const [downvotesCount, setDownvotesCount] = useState(downvotes.length)\n    const [editToggle, setEditToggle] = useState(false)\n\n\n    useEffect(() => {\n        getUserIssues()\n    }, [downvotesCount, upvotesCount])\n\n\n    const handleUpvote = () => {\n        userAxios.put(`/api/issue/upvote/${_id}`)\n        .then(res => {\n            console.log(`this is res.data.upvotes ${res.data.upvotes}`)\n            setUpvotesCount(res.data.upvotes.length)\n            setDownvotesCount(res.data.downvotes.length)\n        })\n        .catch(err => console.log(err))\n\n    }\n    const handleDownvote = () => {\n        userAxios.put(`/api/issue/downvote/${_id}`)\n        .then(res => {\n            console.log(res.data.downvotes)\n            setDownvotesCount(res.data.downvotes.length)\n            setUpvotesCount(res.data.upvotes.length)\n        })\n        .catch(err => console.log(err))\n\n    }\n\n    return (\n        <div className=\"issue\" style={cardStyle}>\n            { !editToggle ?\n                <>\n                    <h1 style= {{fontSize: \"25px\"}}>{title}</h1>\n                    <p style={{margin: \"10px 0\"}}>{description}</p>\n                    <img src={imgUrl} style={imgStyle}></img>\n                    <button style={btnDelStyle} onClick={() => deleteIssue(_id)}>delete issue</button>\n                    <button style={btnEditStyle} onClick={() => setEditToggle(prevToggle => !prevToggle)}>edit issue</button>\n                    <p>Upvote: {upvotesCount}</p>\n                    <img src={UpArrow} style={{width: \"36px\", height: \"36px\"}} onClick={handleUpvote}/>\n                    <p>Total Votes: { upvotesCount + downvotesCount }</p>\n                    <img src={DownArrow} style={{width: \"36px\", height: \"36px\"}} onClick={handleDownvote}/>\n                    <p>Downvote: {downvotesCount} </p>\n                    <h4>{comment}</h4>\n                    <CommentForm _id={_id}/>\n                </>\n            :\n                <>\n                    <IssueForm\n                        title={title}\n                        description={description}\n                        imgUrl={imgUrl}\n                        btnText=\"Submit Edit\"\n                        _id={_id}\n                        submit={editIssue}\n                        handleClose={setEditToggle}\n                    />\n                    <button onClick={() => setEditToggle(prevToggle => !prevToggle)}>Close</button>\n                </>\n            }\n        </div>\n    )\n}\n\nexport default IssueCard\n\nconst cardStyle = {\n    border: \"1px solid black\",\n    padding: \"2em\",\n    margin: \"2em\",\n    borderRadius: \"10px\",\n    width: \"300px\"\n}\n\nconst imgStyle = {\n    maxHeight: \"500px\",\n    maxWidth: \"500px\",\n    margin: \"12px 0\"\n}\n\nconst btnDelStyle = {\n    margin: \"10px 0\",\n    padding: \"10px\",\n    width: \"80%\"\n}\nconst btnEditStyle = {\n    margin: \"10px 0\",\n    padding: \"10px\",\n    width: \"80%\"\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}