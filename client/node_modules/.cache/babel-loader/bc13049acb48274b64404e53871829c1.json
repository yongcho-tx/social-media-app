{"ast":null,"code":"import _toConsumableArray from\"/Users/yong/development/projects/rtv-mern-app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/yong/development/projects/rtv-mern-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import CommentList from'./CommentList.js';import{userAxios}from'../context/UserProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CommentForm=function CommentForm(props){var initComment=\"\";var _useState=useState(initComment),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isOpen=_useState6[0],setIsOpen=_useState6[1];var _id=props._id;var addComment=function addComment(){userAxios.post(\"/api/comment/\".concat(_id),{comment:comment}).then(function(res){setComments(function(prevComments){return[].concat(_toConsumableArray(prevComments),[res.data]);});console.log(\"this is line 23 of comments: \",comments);console.log(\"this is line 24 of comments: \",res.data);}).catch(function(err){return console.log(err.response.data.errMsg);});};var handleCommentSubmit=function handleCommentSubmit(e){e.preventDefault();addComment();setComment(initComment);};var handleShowComments=function handleShowComments(){if(comments.length<1){userAxios.get(\"/api/comment/\".concat(_id)).then(function(res){console.log(res.data);setComments(res.data);}).catch(function(err){return console.log(err);});}setIsOpen(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"comments--button\",onClick:handleShowComments,children:\"Comments\"}),isOpen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCommentSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"comment\",value:comment,onChange:function onChange(e){return setComment(e.target.value);},className:\"comment-input\",placeholder:\"add comment\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add-comment\",children:\"Add Comment\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CommentList,{comments:comments}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close-comment\",onClick:function onClick(){return setIsOpen(false);},children:\"Close Comments\"})]})]})]});};export default CommentForm;","map":{"version":3,"names":["React","useState","CommentList","userAxios","CommentForm","props","initComment","comment","setComment","comments","setComments","isOpen","setIsOpen","_id","addComment","post","then","res","prevComments","data","console","log","catch","err","response","errMsg","handleCommentSubmit","e","preventDefault","handleShowComments","length","get","target","value"],"sources":["/Users/yong/development/projects/rtv-mern-app/client/src/components/CommentForm.js"],"sourcesContent":["import React, { useState } from 'react'\nimport CommentList from './CommentList.js'\nimport {userAxios} from '../context/UserProvider'\n\nconst CommentForm = (props) => {\n\n    const initComment = \"\"\n    const [comment, setComment] = useState(initComment)\n    const [comments, setComments] = useState([])\n    const [isOpen, setIsOpen] = useState(false)\n    const { _id } = props\n\n\n    const addComment = () => {\n        userAxios.post(`/api/comment/${_id}`, {comment})\n        .then(res => {\n            setComments(prevComments => {\n                return [...prevComments, res.data]\n            })\n            console.log(\"this is line 23 of comments: \", comments)\n            console.log(\"this is line 24 of comments: \", res.data)\n        })\n        .catch(err => console.log(err.response.data.errMsg))\n    }\n\n    const handleCommentSubmit = (e) => {\n        e.preventDefault()\n        addComment()\n        setComment(initComment)\n    }\n\n    const handleShowComments = () => {\n        if(comments.length < 1) {\n            userAxios.get(`/api/comment/${_id}`)\n            .then(res => {\n                console.log(res.data)\n                setComments(res.data)\n            })\n            .catch(err => console.log(err))\n        }\n        setIsOpen(true)\n    }\n\n    return (\n        <>\n            <button className=\"comments--button\" onClick={(handleShowComments)}>Comments</button>\n            {\n\n                isOpen &&\n                <>\n                    <form onSubmit={handleCommentSubmit}>\n                        <input\n                        type=\"text\"\n                        name=\"comment\"\n                        value={comment}\n                        onChange={(e) => setComment(e.target.value)}\n                        className=\"comment-input\"\n                        placeholder=\"add comment\"/>\n                        <button className=\"btn-add-comment\">Add Comment</button>\n                    </form>\n                    \n                    <div>\n                        <CommentList \n                            comments={comments}\n                        />\n                        <button className=\"btn-close-comment\" onClick={(() => setIsOpen(false))}>Close Comments</button>\n                    </div>\n                </>\n        \n            }   \n       \n        </>\n    )\n }\n\n export default CommentForm\n"],"mappings":"4RAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,YAAP,KAAwB,kBAAxB,CACA,OAAQC,SAAR,KAAwB,yBAAxB,C,6IAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,KAAD,CAAW,CAE3B,GAAMC,YAAW,CAAG,EAApB,CACA,cAA8BL,QAAQ,CAACK,WAAD,CAAtC,wCAAOC,OAAP,eAAgBC,UAAhB,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA4BT,QAAQ,CAAC,KAAD,CAApC,yCAAOU,MAAP,eAAeC,SAAf,eACA,GAAQC,IAAR,CAAgBR,KAAhB,CAAQQ,GAAR,CAGA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrBX,SAAS,CAACY,IAAV,wBAA+BF,GAA/B,EAAsC,CAACN,OAAO,CAAPA,OAAD,CAAtC,EACCS,IADD,CACM,SAAAC,GAAG,CAAI,CACTP,WAAW,CAAC,SAAAQ,YAAY,CAAI,CACxB,mCAAWA,YAAX,GAAyBD,GAAG,CAACE,IAA7B,GACH,CAFU,CAAX,CAGAC,OAAO,CAACC,GAAR,CAAY,+BAAZ,CAA6CZ,QAA7C,EACAW,OAAO,CAACC,GAAR,CAAY,+BAAZ,CAA6CJ,GAAG,CAACE,IAAjD,EACH,CAPD,EAQCG,KARD,CAQO,SAAAC,GAAG,QAAIH,QAAO,CAACC,GAAR,CAAYE,GAAG,CAACC,QAAJ,CAAaL,IAAb,CAAkBM,MAA9B,CAAJ,EARV,EASH,CAVD,CAYA,GAAMC,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACC,CAAD,CAAO,CAC/BA,CAAC,CAACC,cAAF,GACAd,UAAU,GACVN,UAAU,CAACF,WAAD,CAAV,CACH,CAJD,CAMA,GAAMuB,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC7B,GAAGpB,QAAQ,CAACqB,MAAT,CAAkB,CAArB,CAAwB,CACpB3B,SAAS,CAAC4B,GAAV,wBAA8BlB,GAA9B,GACCG,IADD,CACM,SAAAC,GAAG,CAAI,CACTG,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACE,IAAhB,EACAT,WAAW,CAACO,GAAG,CAACE,IAAL,CAAX,CACH,CAJD,EAKCG,KALD,CAKO,SAAAC,GAAG,QAAIH,QAAO,CAACC,GAAR,CAAYE,GAAZ,CAAJ,EALV,EAMH,CACDX,SAAS,CAAC,IAAD,CAAT,CACH,CAVD,CAYA,mBACI,wCACI,eAAQ,SAAS,CAAC,kBAAlB,CAAqC,OAAO,CAAGiB,kBAA/C,sBADJ,CAIQlB,MAAM,eACN,wCACI,cAAM,QAAQ,CAAEe,mBAAhB,wBACI,cACA,IAAI,CAAC,MADL,CAEA,IAAI,CAAC,SAFL,CAGA,KAAK,CAAEnB,OAHP,CAIA,QAAQ,CAAE,kBAACoB,CAAD,QAAOnB,WAAU,CAACmB,CAAC,CAACK,MAAF,CAASC,KAAV,CAAjB,EAJV,CAKA,SAAS,CAAC,eALV,CAMA,WAAW,CAAC,aANZ,EADJ,cAQI,eAAQ,SAAS,CAAC,iBAAlB,yBARJ,GADJ,cAYI,oCACI,KAAC,WAAD,EACI,QAAQ,CAAExB,QADd,EADJ,cAII,eAAQ,SAAS,CAAC,mBAAlB,CAAsC,OAAO,CAAG,yBAAMG,UAAS,CAAC,KAAD,CAAf,EAAhD,4BAJJ,GAZJ,GALR,GADJ,CA8BF,CArEF,CAuEC,cAAeR,YAAf"},"metadata":{},"sourceType":"module"}