{"ast":null,"code":"var _jsxFileName = \"/Users/yong/development/projects/rtv-mern-app/client/src/components/CommentForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport CommentList from './CommentList.js';\nimport { userAxios } from '../context/UserProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CommentForm = props => {\n  _s();\n\n  const initComment = \"\";\n  const [comment, setComment] = useState(initComment);\n  const [comments, setComments] = useState([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const {\n    _id\n  } = props;\n\n  const addComment = () => {\n    userAxios.post(`/api/comment/${_id}`, {\n      comment\n    }).then(res => {\n      setComments(prevComments => {\n        return [...prevComments, res.data];\n      });\n      console.log(\"this is line 23 of comments: \", comments);\n      console.log(\"this is line 24 of comments: \", res.data);\n    }).catch(err => console.log(err.response.data.errMsg));\n  };\n\n  const handleCommentSubmit = e => {\n    e.preventDefault();\n    addComment();\n    setComment(initComment);\n  };\n\n  const handleShowComments = () => {\n    if (comments.length < 1) {\n      userAxios.get(`/api/comment/${_id}`).then(res => {\n        console.log(res.data);\n        setComments(res.data);\n      }).catch(err => console.log(err));\n    }\n\n    setIsOpen(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"comments--button\",\n      onClick: handleShowComments,\n      children: \"Comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCommentSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"comment\",\n          value: comment,\n          onChange: e => setComment(e.target.value),\n          className: \"comment-input\",\n          placeholder: \"add comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-add-comment\",\n          children: \"Add Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(CommentList, {\n          comments: comments\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-close-comment\",\n          onClick: () => setIsOpen(false),\n          children: \"Close Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(CommentForm, \"EngvOwEeGnSn4hIuHldBkdd1HdQ=\");\n\n_c = CommentForm;\nexport default CommentForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentForm\");","map":{"version":3,"names":["React","useState","CommentList","userAxios","CommentForm","props","initComment","comment","setComment","comments","setComments","isOpen","setIsOpen","_id","addComment","post","then","res","prevComments","data","console","log","catch","err","response","errMsg","handleCommentSubmit","e","preventDefault","handleShowComments","length","get","target","value"],"sources":["/Users/yong/development/projects/rtv-mern-app/client/src/components/CommentForm.js"],"sourcesContent":["import React, { useState } from 'react'\nimport CommentList from './CommentList.js'\nimport {userAxios} from '../context/UserProvider'\n\nconst CommentForm = (props) => {\n\n    const initComment = \"\"\n    const [comment, setComment] = useState(initComment)\n    const [comments, setComments] = useState([])\n    const [isOpen, setIsOpen] = useState(false)\n    const { _id } = props\n\n\n    const addComment = () => {\n        userAxios.post(`/api/comment/${_id}`, {comment})\n        .then(res => {\n            setComments(prevComments => {\n                return [...prevComments, res.data]\n            })\n            console.log(\"this is line 23 of comments: \", comments)\n            console.log(\"this is line 24 of comments: \", res.data)\n        })\n        .catch(err => console.log(err.response.data.errMsg))\n    }\n\n    const handleCommentSubmit = (e) => {\n        e.preventDefault()\n        addComment()\n        setComment(initComment)\n    }\n\n    const handleShowComments = () => {\n        if(comments.length < 1) {\n            userAxios.get(`/api/comment/${_id}`)\n            .then(res => {\n                console.log(res.data)\n                setComments(res.data)\n            })\n            .catch(err => console.log(err))\n        }\n        setIsOpen(true)\n    }\n\n    return (\n        <>\n            <button className=\"comments--button\" onClick={(handleShowComments)}>Comments</button>\n            {\n\n                isOpen &&\n                <>\n                    <form onSubmit={handleCommentSubmit}>\n                        <input\n                        type=\"text\"\n                        name=\"comment\"\n                        value={comment}\n                        onChange={(e) => setComment(e.target.value)}\n                        className=\"comment-input\"\n                        placeholder=\"add comment\"/>\n                        <button className=\"btn-add-comment\">Add Comment</button>\n                    </form>\n                    \n                    <div>\n                        <CommentList \n                            comments={comments}\n                        />\n                        <button className=\"btn-close-comment\" onClick={(() => setIsOpen(false))}>Close Comments</button>\n                    </div>\n                </>\n        \n            }   \n       \n        </>\n    )\n }\n\n export default CommentForm\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}